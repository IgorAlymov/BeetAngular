<div fxLayout="row"> 
    <div fxLayoutAlign="start" style="margin-top: 8px;">
        <mat-card class="example-card-left" style="height: auto;margin-bottom: 100px;">
            <div fxLayout="row" *ngIf="!searchView" style="height: 37px;">
                <button fxFlex="20" mat-button class="normal-font-gray" style="margin-top: -16px;margin-left: -16px;height: 55px;" routerLink="/chats">
                    <mat-icon style="color: gray;margin-left: -20px;">keyboard_arrow_left
                    </mat-icon>
                    Назад
                </button>
                <div fxFlex="69" fxLayoutAlign="center" style="margin-top: 2px;" *ngIf="reciver">
                    <a class="normal-font-black"style="margin-left: -50px;text-decoration: none;" [routerLink]="['/friendpage',idReciver]">
                        {{reciver.firstname + " " + reciver.lastname}}
                    </a>
                </div>
                <div fxFlex="8">
                    <button (click)="showSearch()" matTooltip="Поиск" mat-icon-button style="border-radius: 100px;width: 40px;height: 40px;margin-top: -10px;">
                        <mat-icon style="color: gray;">search
                        </mat-icon>
                    </button>
                </div>
                <div fxFlex="3">
                    <button [routerLink]="['/friendpage',idReciver]"  mat-icon-button style="border-radius: 100px;width: 40px;height: 40px;margin-top: -10px;">
                        <img mat-card-avatar src={{avatarReciver}}>
                    </button>
                </div>
            </div>
            <div fxLayout="row" *ngIf="searchView" style="height: 37px;">
                <div style="margin-top: 0px;width: 100%;">
                    <input autocomplete="off" style="margin-top: -10px;margin-left: 10px;" (input)="changeSearchText(searchText)" [(ngModel)]="searchText" matInput placeholder="Поиск сообщений..." >
                </div>
                <div fxLayoutAlign="end" style="margin-top: -10px;">
                    <button matTooltip="Очистить" mat-icon-button (click)="clearSearchText()" style="margin-right: -10px;">
                        <mat-icon style="color: gray;">close</mat-icon>
                    </button>
                </div>
                <div fxLayoutAlign="end" style="margin-left: 10px;margin-top: -10px;margin-bottom: 5px;" *ngIf="searchButtonView">
                    <button mat-button (click)="searchingText(searchText)" style="background-color: rgb(37, 121, 204);margin-right: -10px;">
                        <a style="color: white" >Поиск</a> 
                    </button>
                </div>
                <div fxLayoutAlign="end" style="margin-left: 17px;margin-top: -10px;margin-bottom: 5px;">
                    <button mat-button (click)="showSearch()" style="background-color: rgb(241, 241, 241);margin-right: -10px;">
                        <a style="color: rgb(37, 121, 204);" >Отмена</a>                    </button>
                </div>
            </div>

            <mat-divider></mat-divider>
            <div #scrollMe style="overflow: scroll; height: 70vh;margin-right: -17px;margin-left: -17px;overflow-x: hidden;">
                <div style="margin-top: 22px;">
                    <div *ngFor="let mes of messages" >
                        <div style="width: auto;margin-left: 20px;margin-bottom: 25px;margin-right: 20px;">
                            <div fxLayout="row" style="margin-top: -3px;">
                                <button  (click)="userPage(mes.author)" mat-icon-button style="border-radius: 100px;width: 40px;height: 40px;">
                                    <img mat-card-avatar src={{mes.avatar}}>
                                </button>
                                <div style="margin-left: 20px;" fxLayout="column" >
                                    <div fxLayout="row">
                                        <a fxLayout="start" (click)="userPage(mes.author)" routerLink="" class="normal-font" style="height: 30px;text-decoration: none;" >{{mes.name}}</a>
                                        <a class="normal-font-gray" style="height: 10px;margin-left: 5px; text-decoration: none;" >{{mes.date | date:'MMM d HH:mm'}} </a>
                                    </div>
                                    <a fxLayout="start" class="normal-font-message" style="margin-top: -5px;text-decoration: none;" >{{mes.text}} </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <mat-divider></mat-divider>
            <div fxLatout="row">
                <mat-form-field appearance="outline" style="width: 93%; margin-bottom: -25px;margin-top: 15px;" >
                    <div style="margin-top: -10px;width: 100%;">
                        <input autocomplete="off" matInput  (input)="changeText(textMes)" [(ngModel)]="textMes" placeholder="Написать сообщение..." >
                    </div>
                </mat-form-field>
                <button matTooltip="Отправить" (click)="sendMessage()"  mat-icon-button style="color: rgb(20, 114, 207);margin-bottom: 0;width: 40px;margin-right: -20px;">
                    <mat-icon style="margin-top: -5px;margin-left: 5px;">send</mat-icon>
                </button>
            </div>
        </mat-card>
    </div>
    <div fxLayout="column">
        <mat-card class="example-card-right" style="margin-top: 17px;width: 173px;height: 20px;">
            <div fxLayout="row">
                <div>
                    <button mat-button style="width: 207px;margin-left: -17px;margin-top: -11px;" routerLink="/chats">
                        <a style="margin-left: -65px;">
                            Все сообщения
                        </a>
                    </button>
                </div>
            </div>
        </mat-card>
        <mat-card class="example-card-right" style="width: 173px;height: 20px;">
            <div fxLayout="row">
                <mat-icon style="transform: rotate(90deg);font-size: 40px;color: rgb(37, 121, 204);margin-left: -19px;margin-top: -9px;" >remove</mat-icon>
                <div>
                    <button mat-button style="width: 207px;margin-left: -23px;margin-top: -11px;">
                        <a style="margin-left: 5px;" fxLayout="start">
                            {{reciver.firstname + " " + reciver.lastname}}
                        </a>
                    </button>
                </div>
            </div>
        </mat-card>
    </div>
</div>